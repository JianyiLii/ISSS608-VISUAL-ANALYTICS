{
  "hash": "035566b56e5c6e9a23636c0a3ae4e217",
  "result": {
    "markdown": "---\ntitle: \"Take-home Exercise 1 : <br>Singapore Residents by Planning Area/Subzone, Single Year of Age and Sex, June 2024\"\ndescription: \"\"\ndate: \"2025-05-01\"\ndate-modified: \"2025-05-04\"\nformat: html\neditor: visual\n# author: \"Li Jianyi\"\nexecute:\n  eval: true #- Run the code and show the result.\n  echo: true #- Show the code in the output.\n  warning: false\n  freeze: true\n---\n\n\n<!-- #| code-fold: false -->\n<!-- #| code-summary: \"Click to view code\" -->\n\n<br> <br>\n\n# **1. Overview**\n\n### **1.1 Setting the Scene**\n\nA local online media company that publishes daily content on digital platforms is planning to release an article on demographic structures and distribution of Singapore in 2024. Singapore’s population landscape is constantly evolving due to demographic shifts such as aging, fertility trends, and migration. Understanding the distribution of residents by age, gender, and location is crucial for informed urban planning, resource allocation, and policy formulation. This exercise aims to visualise the 2024 demographic structure and spatial distribution of Singapore residents across planning areas and subzones. Through visual analytics, we seek to uncover meaningful patterns and insights that support public awareness and strategic decision-making.\n\n### **1.2 Task and Objective**\n\nAssuming the role of the graphical editor of the media company, our tasked to prepare at most three data visualisation for the article. The objective of this analysis is to uncover regional population patterns and age composition trends across planning areas in 2024 using visual analytics. Specifically, we aim to:\n\n-   Identify age concentrations across planning areas via a heatmap.\n-   Explore regional disparities in age distribution using boxplots.\n-   Examine population ageing and youth dependency dynamics through bubble charts.\n\nThese insights will help policymakers and urban planners to design age-targeted strategies that align with the demographic characteristics of each region.\n\n### **1.3 Data Description**\n\nThe dataset used in this study is sourced from the Singapore Department of Statistics and titled “Singapore Residents by Planning Area/Subzone, Single Year of Age and Sex, June 2024.” It contains information on resident population counts broken down by:\n\n-   PA ---\\> Planning Area\n-   SZ ---\\> Subzone\n-   Pop ---\\> Population\n-   Age\n-   Sex –--\\> Male or Female\n-   Time –--\\> Year of data (2024)\n\n### **2. Getting Started**\n\n### **2.1 Data Loading**\n\nWe begin by loading the necessary libraries using the pacman package to ensure all required functions are available.\n\n-   tidyverse: Data manipulation and visualization\n-   patchwork: Combining multiple plots if needed\n-   hrbrthemes: Clean and minimal visual themes\n-   ggrepel: Prevent overlapping text labels\n-   Hmisc: Weighted quantile calculations (for boxplot annotations)\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Click to view code\"}\npacman::p_load(tidyverse, patchwork, hrbrthemes, ggrepel, Hmisc)\n```\n:::\n\n\n### **2.2 Data Import**\n\nNext, we import the main dataset using `read_csv()`. Since the analysis focuses on the year 2024, we filter accordingly.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nexam_data <- read_csv(\"data/data.csv\")\n```\n:::\n\n\n### **2.3 Data Cleaning**\n\nThe cleaning process involves:\n\n-   Filtering records to only include Time == 2024.\n\n-   Handle Missing value\n\n-   Glimpse of data\n\nConverting the Age field:\n\n-   Any age label containing “100” (e.g., “100+”) is converted to numeric 100.\n\n-   Age labels containing “90” (e.g., “90+” or “90_and_over”) are converted to numeric 90.\n\n-   All other age values are converted to numeric as-is.\n\nRemoving rows where the age conversion fails.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Click to view code\"}\nclean_data <- exam_data %>%\n  filter(Time == 2024) %>%\n  mutate(\n    Age_num = case_when(\n      str_detect(Age, \"100\") ~ 100,\n      str_detect(Age, \"90\") ~ 90,\n      str_detect(Age, \"^\\\\d+$\") ~ as.numeric(Age),\n      TRUE ~ NA_real_\n    )\n  ) %>%\n  filter(!is.na(Age_num))\n```\n:::\n\n\nAdditionally, we standardize age group classification (Youth: ≤19; Working: 20–64; Elderly: ≥65) for later segmentation.\n\n-   Check duplicates\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nexam_data %>%\n  duplicated() %>%\n  sum()  # returns number of duplicate rows\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\nexam_data <- exam_data %>%\n  distinct()\n```\n:::\n\n\n-   Check Missing value\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nsummary(exam_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      PA                 SZ                Age                Sex           \n Length:60424       Length:60424       Length:60424       Length:60424      \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n      Pop              Time     \n Min.   :   0.0   Min.   :2024  \n 1st Qu.:   0.0   1st Qu.:2024  \n Median :  20.0   Median :2024  \n Mean   :  69.4   Mean   :2024  \n 3rd Qu.:  90.0   3rd Qu.:2024  \n Max.   :1180.0   Max.   :2024  \n```\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\ncolSums(is.na(exam_data))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  PA   SZ  Age  Sex  Pop Time \n   0    0    0    0    0    0 \n```\n:::\n:::\n\n\n# Glimpse of data\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nstr(exam_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [60,424 × 6] (S3: tbl_df/tbl/data.frame)\n $ PA  : chr [1:60424] \"Ang Mo Kio\" \"Ang Mo Kio\" \"Ang Mo Kio\" \"Ang Mo Kio\" ...\n $ SZ  : chr [1:60424] \"Ang Mo Kio Town Centre\" \"Ang Mo Kio Town Centre\" \"Ang Mo Kio Town Centre\" \"Ang Mo Kio Town Centre\" ...\n $ Age : chr [1:60424] \"0\" \"0\" \"1\" \"1\" ...\n $ Sex : chr [1:60424] \"Males\" \"Females\" \"Males\" \"Females\" ...\n $ Pop : num [1:60424] 10 10 10 10 10 10 10 10 30 10 ...\n $ Time: num [1:60424] 2024 2024 2024 2024 2024 ...\n```\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\nglimpse(exam_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 60,424\nColumns: 6\n$ PA   <chr> \"Ang Mo Kio\", \"Ang Mo Kio\", \"Ang Mo Kio\", \"Ang Mo Kio\", \"Ang Mo K…\n$ SZ   <chr> \"Ang Mo Kio Town Centre\", \"Ang Mo Kio Town Centre\", \"Ang Mo Kio T…\n$ Age  <chr> \"0\", \"0\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", \"4\", \"4\", \"5\", \"5\", \"6\", …\n$ Sex  <chr> \"Males\", \"Females\", \"Males\", \"Females\", \"Males\", \"Females\", \"Male…\n$ Pop  <dbl> 10, 10, 10, 10, 10, 10, 10, 10, 30, 10, 20, 10, 20, 30, 30, 10, 3…\n$ Time <dbl> 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024,…\n```\n:::\n:::\n\n\n### **3. Exploratory Visual Analysis**\n\n### **EDA 1: Heatmap of Population by Age and Planning Area (2024)**\n\nThis heatmap visualizes the total population across different planning areas in Singapore by age. Each row represents a single age (e.g., 0 to 100), and each column corresponds to a planning area. The intensity of color indicates the number of residents in a specific age group within each planning area. Darker shades represent higher population counts, allowing for easy visual comparison of population structure across locations.\n\nThe data was pre-aggregated using `group_by(PA, Age_num)` and `summarise(TotalPop = sum(Pop))` to obtain total population per age and area combination.\n\n::: panel-tabset\n## Heatmap\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-7-1.png){width=1152}\n:::\n:::\n\n\n## code\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nheatmap_df <- clean_data %>%\n  group_by(PA, Age_num) %>%\n  summarise(TotalPop = sum(Pop), .groups = \"drop\")\n\nggplot(heatmap_df, aes(x = reorder(PA, -TotalPop), y = Age_num, fill = TotalPop)) +\n  geom_tile(color = \"white\") +\n  scale_fill_gradient(low = \"#f2f0f7\", high = \"#54278f\", name = \"Population\") +\n  labs(\n    title = \"Heatmap of Population by Age and Planning Area (2024)\",\n    x = \"Planning Area\",\n    y = \"Age\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n:::\n\n:::\n\n::: {.callout-note title=\"Insight\"}\nThe heatmap reveals that younger populations (ages 0–19) are more prevalent in towns like Punggol, Sengkang, and Jurong West, which are known for newer housing developments. In contrast, older populations (ages 65 and above) are concentrated in mature estates such as Toa Payoh, Bukit Merah, and Queenstown. These demographic patterns can guide resource allocation for education (schools, childcare) and healthcare (eldercare services) based on age concentrations in each area.\n:::\n\n### **EDA 2: Boxplot of Age Distribution by Region**\n\nThis boxplot displays the age distribution of residents across selected regions in Singapore. Each box represents the interquartile range (IQR) — the middle 50% of the population — while the horizontal line inside the box indicates the median age. The whiskers extend to the lowest and highest non-outlier values, and outliers beyond these are also shown.\n\nTo account for differences in population size, the plot is weighted by the `population count (Pop)`. `Weighted quartiles (Q1, Median, Q3)` were computed using the `Hmisc::wtd.quantile()` function and annotated on the plot for clearer interpretation.\n\n::: panel-tabset\n## Boxplot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n## Code\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nbox_df <- clean_data %>%\n  inner_join(region_map, by = \"PA\") %>%\n  mutate(\n    Age_num = case_when(\n      str_detect(Age, \"100\") ~ 100,\n      str_detect(Age, \"90\") ~ 90,\n      str_detect(Age, \"^\\\\d+$\") ~ as.numeric(Age),\n      TRUE ~ NA_real_\n    )\n  ) %>%\n  filter(!is.na(Age_num))\n\nquartiles_df <- box_df %>%\n  group_by(Region) %>%\n  summarise(\n    Q1 = wtd.quantile(Age_num, weights = Pop, probs = 0.25, na.rm = TRUE),\n    Median = wtd.quantile(Age_num, weights = Pop, probs = 0.5, na.rm = TRUE),\n    Q3 = wtd.quantile(Age_num, weights = Pop, probs = 0.75, na.rm = TRUE)\n  )\n\nggplot(box_df, aes(x = Region, y = Age_num)) +\n  geom_boxplot(aes(weight = Pop), fill = \"#FDC086\", color = \"#E07B39\") +\n  geom_text(data = quartiles_df, aes(x = Region, y = Q1, label = paste0(\"Q1: \", round(Q1))), \n            vjust = -1.5, size = 3) +\n  geom_text(data = quartiles_df, aes(x = Region, y = Median, label = paste0(\"Median: \", round(Median))), \n            vjust = -0.2, size = 3, fontface = \"bold\") +\n  geom_text(data = quartiles_df, aes(x = Region, y = Q3, label = paste0(\"Q3: \", round(Q3))), \n            vjust = 1.5, size = 3) +\n  labs(\n    title = \"Boxplot of Age Distribution by Region\",\n    x = \"Region\",\n    y = \"Age\"\n  ) +\n  theme_minimal(base_size = 12)\n```\n:::\n\n:::\n\n::: {.callout-note title=\"Insight\"}\nThe Central region shows the widest IQR and highest median age, suggesting a concentration of older residents in mature housing estates like Toa Payoh and Queenstown. In contrast, the East and North-East regions have narrower boxes and lower medians, indicating a younger demographic — likely linked to newer developments attracting young families. Outliers at the upper end of most regions reflect the presence of aging residents across the country, though at different levels of intensity.\n:::\n\n### **EDA 3: Ageing Index vs Youth Dependency Ratio by Planning Area (2024)**\n\nThis bubble chart visualizes the demographic balance of Singapore's planning areas by comparing two key ratios:\n\n-   Ageing Index (vertical axis): Elderly population relative to youth\n\n-   Youth Dependency Ratio (horizontal axis): Youth population relative to working-age adults\n\nEach bubble represents a planning area. Its position indicates the ageing structure, while the color reflects total population tier (Low, Medium, High). Bubble size corresponds to the total population, providing an additional layer of magnitude.\n\nThe chart highlights regional disparities in demographic pressures. This type of visual is particularly useful for public policy makers to simultaneously assess youth dependency and ageing pressure across local areas.\n\n::: {.panel-tabset}\n\n## Bubble Chart\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-11-1.png){width=960}\n:::\n:::\n\n\n## Code\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nageing_df <- clean_data %>%\n  mutate(\n    Age_num = case_when(\n      str_detect(Age, \"100\") ~ 100,\n      str_detect(Age, \"90\") ~ 90,\n      str_detect(Age, \"^\\\\d+$\") ~ as.numeric(Age),\n      TRUE ~ NA_real_\n    ),\n    AgeGroup = case_when(\n      Age_num <= 23 ~ \"Youth\",\n      Age_num >= 65 ~ \"Elderly\",\n      TRUE ~ \"Working\"\n    )\n  ) %>%\n  group_by(PA, AgeGroup) %>%\n  summarise(Population = sum(Pop), .groups = \"drop\") %>%\n  pivot_wider(names_from = AgeGroup, values_from = Population, values_fill = 0) %>%\n  mutate(\n    Ageing_Index = Elderly / Youth,\n    Youth_Dependency = Youth / Working,\n    TotalPop = Elderly + Youth + Working,\n    PopGroup = case_when(\n      TotalPop >= 200000 ~ \"High\",\n      TotalPop >= 100000 ~ \"Medium\",\n      TRUE ~ \"Low\"\n    )\n  )\n\nggplot(ageing_df, aes(x = Youth_Dependency, y = Ageing_Index, size = TotalPop, color = PopGroup, label = PA)) +\n  geom_point(alpha = 0.7) +\n  geom_text_repel(size = 3, max.overlaps = 12) +\n  scale_size(range = c(2, 12), guide = \"none\") +\n  scale_color_manual(values = c(\"Low\" = \"#66c2a5\", \"Medium\" = \"#fc8d62\", \"High\" = \"#8da0cb\")) +\n  labs(\n    title = \"Ageing Index vs Youth Dependency Ratio by Planning Area (2024)\",\n    x = \"Youth Dependency Ratio (Youth / Working Age)\",\n    y = \"Ageing Index (Elderly / Youth)\",\n    color = \"Population Tier\"\n  ) +\n  theme_minimal(base_size = 12)\n```\n:::\n\n\n:::\n\n::: {.callout-note title=\"Insight\"}\nMature estates such as Bukit Timah, Marine Parade, and Toa Payoh exhibit high ageing indices, suggesting a significant elderly population relative to youth. In contrast, towns like Punggol and Sengkang have low ageing indices but high youth dependency ratios, indicating a younger demographic with more children per working adult. Bubble sizes show that Bedok, Tampines, and Jurong West have among the largest populations, making them key zones for age-targeted service delivery. This dual-axis visual helps forecast public service needs — from eldercare to early childhood education — based on population structure.\n:::\n\n### **4. Summary**\n\nThis visual analytics project explored the demographic structure of Singapore in 2024 using three key static visualisations:\n\n1.  A heatmap revealed how different age groups are distributed across planning areas, clearly showing that newer towns like Punggol and Sengkang are home to younger populations, while mature estates such as Toa Payoh and Queenstown have a larger concentration of elderly residents.\n\n2.  A boxplot, weighted by population, illustrated the age distribution within selected regions. Central regions showed higher medians and wider age spread, suggesting aging communities, while East and North-East regions indicated younger, more uniform age profiles.\n\n3.  A bubble chart compared ageing index and youth dependency ratio across planning areas. This dual-axis view allowed identification of towns experiencing demographic pressure from either end of the age spectrum. Towns like Punggol have high youth dependency, whereas places like Bukit Timah and Marine Parade show high ageing indices.\n\nTogether, these visualisations offer valuable insight into Singapore’s age distribution at both regional and town levels. They inform decisions in areas such as urban planning, healthcare infrastructure, school allocation, and social service delivery — ensuring policies are targeted to meet the evolving needs of the population.\n\n### **5. References**\n\n[Singapore Residents by Planning Area/Subzone, Single Year of Age and Sex, June 2024.](https://www.singstat.gov.sg/find-data/search-by-theme/population/geographic-distribution/latest-data)\n\n[Take-home Exercise brief](https://isss608-ay2024-25apr.netlify.app/th_ex/th_ex1)\n",
    "supporting": [
      "Take-home_Ex01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}