{
  "hash": "6e5d118d6370265957e07f1dd674ba87",
  "result": {
    "markdown": "---\ntitle: \"Hands-on Exercise 2 : <br> 2  Beyond ggplot2 Fundamentals\"\ndescription: \"\"\ndate: \"2025-04-24\"\ndate-modified: \"2025-05-01\"\nformat: html\neditor: visual\nauthor: \"Li Jianyi\"\nexecute:\n  eval: true #- Run the code and show the result.\n  echo: true #- Show the code in the output.\n  warning: false\n  freeze: true\n---\n\n\n<br> <br>\n\n### **2.1 Overview**\nIn this chapter, you will be introduced to several ggplot2 extensions for creating more elegant and effective statistical graphics. By the end of this exercise, you will be able to:\n\n- control the placement of annotation on a graph by using functions provided in ggrepel package,\n- create professional publication quality figure by using functions provided in ggthemes and hrbrthemes packages,\n- plot composite figure by combining ggplot2 graphs by using patchwork package.\n\n### **2.2 Getting started**\n\n### **2.2.1 Installing and loading the required libraries**\n\nIn this exercise, beside tidyverse, four R packages will be used. They are:\n\n- ggrepel: an R package provides geoms for ggplot2 to repel overlapping text labels.\n- ggthemes: an R package provides some extra themes, geoms, and scales for ‘ggplot2’.\n- hrbrthemes: an R package provides typography-centric themes and theme components for ggplot2.\n- patchwork: an R package for preparing composite figure created using ggplot2.\n- Code chunk below will be used to check if these packages have been installed and also will load them onto your working R environment.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\npacman::p_load(tidyverse, ggrepel, ggthemes, hrbrthemes, patchwork)\n```\n:::\n\n\n### **2.2.2 Importing data**\nFor the purpose of this exercise, a data file called Exam_data will be used. It consists of year end examination grades of a cohort of primary 3 students from a local school. It is in csv file format.\n\nThe code chunk below imports exam_data.csv into R environment by using [[*read_csv()*]{.underline}](https://readr.tidyverse.org/reference/read_delim.html) function of [[*readr*]{.underline}](https://readr.tidyverse.org/) package. readr is one of the tidyverse package.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nexam_data <- read_csv(\"data/Exam_data.csv\")\n```\n:::\n\n\nThere are a total of seven attributes in the exam_data tibble data frame. Four of them are categorical data type and the other three are in continuous data type.\n\n- The categorical attributes are: ID, CLASS, GENDER and RACE.\n- The continuous attributes are: MATHS, ENGLISH and SCIENCE.\n\n### **2.3 Beyond ggplot2 Annotation: ggrepel**\nOne of the challenge in plotting statistical graph is annotation, especially with large number of data points.\n\n::: {.panel-tabset}\n## The plot\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## The code\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(data=exam_data, \n       aes(x= MATHS, \n           y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5) +  \n  geom_label(aes(label = ID), \n             hjust = .5, \n             vjust = -.5) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n:::\n\n:::\n\n[_ggrepel_](https://ggrepel.slowkow.com/) is an extension of ggplot2 package which provides geoms for ggplot2 to repel overlapping text as in our examples on the right.\n![diagram](1.png)\nWe simply replace geom_text() by [_geom_text_repel()_](https://ggrepel.slowkow.com/reference/geom_text_repel.html) and geom_label() by [_geom_label_repel_](https://ggrepel.slowkow.com/reference/geom_text_repel.html).\n\n### **2.3.1 Working with ggrepel**\n\n::: {.panel-tabset}\n## The plot\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## The code\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(data=exam_data, \n       aes(x= MATHS, \n           y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5) +  \n  geom_label_repel(aes(label = ID), \n                   fontface = \"bold\") +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n:::\n\n:::\n\n### **2.4 Beyond ggplot2 Themes**\n\nggplot2 comes with eight [_built-in themes_](https://ggplot2.tidyverse.org/reference/ggtheme.html), they are: theme_gray(), theme_bw(), theme_classic(), theme_dark(), theme_light(), theme_linedraw(), theme_minimal(), and theme_void().\n\n::: {.panel-tabset}\n## The plot\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n## The code\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_gray() +\n  ggtitle(\"Distribution of Maths scores\") \n```\n:::\n\n:::\nRefer to this [_link_](https://ggplot2.tidyverse.org/reference/index.html#themes) to learn more about ggplot2 Themes\n\n### **2.4.1 Working with ggtheme package**\n[_ggthemes_](https://cran.r-project.org/web/packages/ggthemes/index.html) provides [_‘ggplot2’ themes_](https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/) that replicate the look of plots by Edward Tufte, Stephen Few, [_Fivethirtyeight_](https://abcnews.go.com/politics), [_The Economist_](https://www.economist.com/topics/graphic-detail), ‘Stata’, ‘Excel’, and [_The Wall Street Journal_](https://www.pinterest.com/wsjgraphics/wsj-graphics/), among others.\n\nIn the example below, The Economist theme is used.\n\n::: {.panel-tabset}\n## The plot\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Ex02_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n## The code\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_economist()\n```\n:::\n\n:::\nIt also provides some extra geoms and scales for ‘ggplot2’. Consult [_this vignette_](https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/) to learn more.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "supporting": [
      "Hands-on_Ex02_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}